import Foundation

// this file was generated by Xcode-Better-Refactor-Tools
// https://github.com/tjarratt/xcode-better-refactor-tools

struct Fake{{protocol_name}} : {{protocol_name}}, Equatable {
    private let hash: Int = Int(arc4random())

    init() {
*       {{# getters }}
        self.set_{{ name }}Args = []
*       {{/ getters }}
*       {{# setters }}
        self.set_{{ name }}Args = []
*       {{/ setters }}
    }

*   {{# getters }}
    private var _{{ name  }} : {{ type }}?
    private var set_{{ name }}Args : Array<{{ type }}>
*   {{/ getters }}

*   {{# setters }}
    private var _{{ name  }} : {{ type }}?
    private var set_{{ name }}Args : Array<{{ type }}>
*   {{/ setters }}

*   {{# getters }}
    var {{ name }} : {{ type }} {
        get {
            return _{{ name }}!
        }

        set {
            _{{ name }} = newValue
            set_{{ name }}Args.append(newValue)
        }
    }

*   {{/ getters }}
*   {{# setters }}
    var {{ name }} : {{ type }} {
        get {
            return _{{ name }}!
        }

        set {
            _{{ name }} = newValue
            set_{{ name }}Args.append(newValue)
        }
    }

*   {{/ setters }}
*   {{# getters }}
    func set{{ capitalized_name }}CallCount() -> Int {
        return set_{{ name }}Args.count
    }

    func set{{ capitalized_name }}ArgsForCall(index : Int) throws -> {{ type }} {
        if index < 0 || index >= set_{{ name }}Args.count {
            throw NSError.init(domain: "swift-generate-fake-domain", code: 1, userInfo: nil)
        }
        return set_{{ name }}Args[index]
    }

*   {{/ getters }}
*   {{# setters }}
    func set{{ capitalized_name }}CallCount() -> Int {
        return set_{{ name }}Args.count
    }

    func set{{ capitalized_name }}ArgsForCall(index : Int) throws -> {{ type }} {
        if index < 0 || index >= set_{{ name }}Args.count {
            throw NSError.init(domain: "swift-generate-fake-domain", code: 1, userInfo: nil)
        }
        return set_{{ name }}Args[index]
    }

*   {{/ setters }}
*   {{# mutating_methods }}
    private(set) var {{ name }}CallCount : Int = 0
*   {{# has_return_values }}
    var {{ name }}Stub : (({{{ comma_delimited_arg_types }}}){{throws}}-> ({{{ comma_delimited_return_types }}}))?
*   {{/ has_return_values }}
*   {{# has_arguments }}
    private var {{ name }}Args : Array<({{{ comma_delimited_arg_types }}})> = []
*   {{/ has_arguments }}
*   {{# has_return_values }}
    mutating func {{ name }}Returns(stubbedValues: ({{{ comma_delimited_return_types }}})) {
        self.{{ name }}Stub = {({{ named_arguments }}) -> ({{{ comma_delimited_return_types }}}) in
            return stubbedValues
        }
    }
*   {{/ has_return_values }}
*   {{# has_arguments }}
    func {{ name }}ArgsForCall(callIndex: Int) -> ({{{ comma_delimited_arg_types }}}) {
        return self.{{ name }}Args[callIndex]
    }
*   {{/ has_arguments }}
    mutating func {{name}}({{ named_arguments }}){{throws}}{{{ optional_return_expression }}}{
        self.{{name}}CallCount++
*       {{# has_arguments }}
        self.{{ name }}Args.append(({{ comma_delimited_arg_names }}))
*       {{/ has_arguments }}
*       {{# has_return_values }}
        return {{pre_stub_invocation}}self.{{ name }}Stub!({{ comma_delimited_arg_names }})
*       {{/ has_return_values }}
    }

*   {{/ mutating_methods }}
*   {{# instance_methods }}
    private(set) var {{ name }}CallCount : Int = 0
*   {{# has_return_values }}
    var {{ name }}Stub : (({{{ comma_delimited_arg_types }}}){{throws}}-> ({{{ comma_delimited_return_types }}}))?
*   {{/ has_return_values }}
*   {{# has_arguments }}
    private var {{ name }}Args : Array<({{{ comma_delimited_arg_types }}})> = []
*   {{/ has_arguments }}
*   {{# has_return_values }}
    func {{ name }}Returns(stubbedValues: ({{{ comma_delimited_return_types }}})) {
        self.{{ name }}Stub = {({{ named_arguments }}) -> ({{{ comma_delimited_return_types }}}) in
            return stubbedValues
        }
    }
*   {{/ has_return_values }}
*   {{# has_arguments }}
    func {{ name }}ArgsForCall(callIndex: Int) -> ({{{ comma_delimited_arg_types }}}) {
        return self.{{ name }}Args[callIndex]
    }
*   {{/ has_arguments }}
    func {{name}}({{ named_arguments }}){{throws}}{{{ optional_return_expression }}}{
        self.{{name}}CallCount++
*       {{# has_arguments }}
        self.{{ name }}Args.append(({{ comma_delimited_arg_names }}))
*       {{/ has_arguments }}
*       {{# has_return_values }}
        return {{pre_stub_invocation}}self.{{ name }}Stub!({{ comma_delimited_arg_names }})
*       {{/ has_return_values }}
    }

*   {{/ instance_methods }}
*   {{# static_methods }}
    private(set) static var {{ name }}CallCount : Int = 0
*   {{# has_return_values }}
    static var {{ name }}Stub : (({{{ comma_delimited_arg_types }}}) -> ({{{ comma_delimited_return_types }}}))?
*   {{/ has_return_values }}
*   {{# has_arguments }}
    static private var {{ name }}Args : Array<({{{ comma_delimited_arg_types }}})> = []
*   {{/ has_arguments }}
*   {{# has_return_values }}
    static func {{ name }}Returns(stubbedValues: ({{{ comma_delimited_return_types }}})) {
        self.{{ name }}Stub = {({{{ named_arguments }}}) -> ({{{ comma_delimited_return_types }}}) in
            return stubbedValues
        }
    }
*   {{/ has_return_values }}
*   {{# has_arguments }}
    static func {{ name }}ArgsForCall(callIndex: Int) -> ({{{ comma_delimited_arg_types }}}) {
        return self.{{ name }}Args[callIndex]
    }
*   {{/ has_arguments }}
    static func {{name}}({{ named_arguments }}) {{{ optional_return_expression }}}{
        self.{{name}}CallCount++
*       {{# has_arguments }}
        self.{{ name }}Args.append(({{ comma_delimited_arg_names }}))
*       {{/ has_arguments }}
*       {{# has_return_values }}
        return self.{{ name }}Stub!({{ comma_delimited_arg_names }})
*       {{/ has_return_values }}
    }

*   {{/ static_methods }}
    static func reset() {
*   {{# static_methods }}
*   {{# has_arguments }}
        self.{{ name }}Args = []
*   {{/ has_arguments }}
*   {{# has_return_values }}
        self.{{ name  }}Stub = nil
*   {{/ has_return_values }}
*   {{/ static_methods }}
    }
}

func == (a: Fake{{protocol_name}}, b: Fake{{protocol_name}}) -> Bool {
    return a.hash == b.hash
}